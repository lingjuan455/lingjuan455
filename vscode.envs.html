<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VS Code Jump Host Jupyter Guide with Environment Info</title>
  <!-- Use GitHub style for code highlighting -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      max-width: 800px;
      margin: auto;
      padding: 2rem;
      background-color: #ffffff;
      color: #333;
    }
    h1, h2, h3 {
      color: #333;
    }
    pre {
      background-color: #f6f8fa;
      padding: 1em;
      overflow-x: auto;
      border-radius: 5px;
      border: 1px solid #e1e4e8;
      margin: 1em 0;
    }
    code {
      font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
      font-size: 14px;
    }
    p code {
      background-color: #f6f8fa;
      padding: 2px 4px;
      border-radius: 4px;
    }
    .env-label {
      font-weight: bold;
      color: #005cc5;
    }
  </style>
</head>
<body>
  <h1>üåê Using VS Code to Connect to a Remote Server via Jump Host (and Run Jupyter with Python &amp; R)</h1>
  <p>This guide explains how to:</p>
  <ul>
    <li>Connect to a remote server via a <strong>jump server</strong> using <strong>VS Code</strong></li>
    <li>Set up and run <strong>Jupyter notebooks</strong> remotely</li>
    <li>Use both <strong>Python</strong> and <strong>R</strong> kernels in Jupyter</li>
    <li>Clearly indicate which <span class="env-label">environment</span> each code block should run in</li>
  </ul>
  <hr>
  <h2>1. Prerequisites</h2>
  <p>Ensure you have the following on your <strong>local machine</strong>:</p>
  <ul>
    <li><a href="https://code.visualstudio.com/">Visual Studio Code</a></li>
    <li>VS Code Extensions:
      <ul>
        <li><strong>Remote - SSH</strong></li>
        <li><strong>Jupyter</strong></li>
        <li><strong>Python</strong></li>
      </ul>
    </li>
    <li>An SSH setup that works (verify by SSHing into the server from the terminal)</li>
  </ul>
  <hr>
  <h2>2. Setup SSH Config with a Jump Host</h2>
  <p>Edit your SSH config file:</p>
  <pre><code class="bash">nano ~/.ssh/config</code></pre>
  <p>Add the following configuration (replace with your actual usernames and hostnames):</p>
  <pre><code class="ssh">Host jump
  HostName jump.vtc.vt.edu
  User yourname

Host vtserver
  HostName vt00046xxxx
  User lunah
  ProxyJump jump</code></pre>
  <p>Save and exit (<code>Ctrl+O</code>, <code>Enter</code>, <code>Ctrl+X</code>).</p>
  <p>You can now connect via:</p>
  <pre><code class="bash">ssh vtserver</code></pre>
  <hr>
  <h2>3. Connect to Server via VS Code</h2>
  <ol>
    <li>Open VS Code.</li>
    <li>Press <code>Ctrl+Shift+P</code> and select <strong>Remote-SSH: Connect to Host...</strong>.</li>
    <li>Choose <code>vtserver</code>.</li>
    <li>You will be prompted for your password and Duo verification.</li>
  </ol>
  <hr>
  <h2>4. Prepare the Server Environment</h2>
  <p>Once connected (in the remote VS Code window), open a terminal and follow these steps.</p>
  
  <h3>üêç Enabling Python in Jupyter</h3>
  <p><span class="env-label">[In your conda environment]</span> Ensure your environment has Python and Jupyter:</p>
  <pre><code class="bash"># Activate your Python environment
conda activate your_env

# Install Jupyter and IPython kernel if not already installed
conda install jupyter ipykernel
  
  <h3>üìò Enabling R in Jupyter</h3>
  <ol>
    <li>
      <p><span class="env-label">[In your R conda environment]</span> Install R if necessary:</p>
      <pre><code class="bash">conda install -c r r-base</code></pre>
    </li>
    <li>
      <p>Launch R:</p>
      <pre><code class="bash">R</code></pre>
    </li>
    <li>
      <p>Within the R console, install IRkernel:</p>
      <pre><code class="r">install.packages("IRkernel")
IRkernel::installspec(user = FALSE)</code></pre>
    </li>
    <li>
      <p>Exit R:</p>
      <pre><code class="r">q()</code></pre>
    </li>
  </ol>
  <hr>
  <h2>5. Open Jupyter Notebooks in VS Code</h2>
  <ol>
    <li>In VS Code (in the remote window), open your <code>.ipynb</code> notebook file.</li>
    <li>Click on the top-right <strong>kernel picker</strong>.</li>
    <li>Select the appropriate kernel:
      <ul>
        <li><strong>Python (your_python_env)</strong> for Python code</li>
        <li><strong>R</strong> for R code</li>
      </ul>
    </li>
  </ol>
  <p>You are now running Jupyter notebooks with both Python and R on the remote server.</p>
  <hr>
  <h2>Done!</h2>
  <p>You can now:</p>
  <ul>
    <li>Write and execute Python and R code within the same Jupyter interface.</li>
    <li>Work directly on the remote server using VS Code.</li>
    <li>Share this configuration with your team.</li>
  </ul>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
  <script>
    hljs.highlightAll();
  </script>
</body>
</html>
